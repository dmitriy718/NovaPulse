# ==============================================================================
# NovaPulse v3 â€” Environment Configuration
# Copy to .env and fill in your values: cp .env.example .env
# ==============================================================================

# ---- General ----
APP_ENV=production

# ---- Kraken Exchange ----
KRAKEN_SANDBOX=false
KRAKEN_API_KEY=your_kraken_api_key
KRAKEN_API_SECRET=your_kraken_api_secret

# ---- Trading ----
# "paper" = simulated (default, safe) | "live" = REAL MONEY
TRADING_MODE=paper

# Set to true to start with trading paused (can resume via Telegram/dashboard)
START_PAUSED=true

# ---- Canary Mode (controlled rollout) ----
CANARY_MODE=false
CANARY_PAIRS=BTC/USD,ETH/USD
CANARY_MAX_PAIRS=2
CANARY_MAX_POSITION_USD=100.0
CANARY_MAX_RISK_PER_TRADE=0.005
CANARY_MIN_CONFIDENCE=0.68
CANARY_MIN_CONFLUENCE=3
CANARY_SCAN_INTERVAL_SECONDS=60

# ---- Exchange Selection ----
# "kraken" (default) or "coinbase"
ACTIVE_EXCHANGE=kraken
# Optional multi-exchange mode (runs one engine per exchange in one process)
# Example: TRADING_EXCHANGES=kraken,coinbase
TRADING_EXCHANGES=
# Optional multi-account+exchange mapping
# Example: TRADING_ACCOUNTS=main:kraken,main:coinbase,swing:kraken
TRADING_ACCOUNTS=
# Optional account label for single-account deployments
ACCOUNT_ID=default

# ---- Order Options ----
EXCHANGE_POST_ONLY=false
CANDLE_POLL_SECONDS=60

# ---- Risk Management ----
MAX_RISK_PER_TRADE=0.005
MAX_DAILY_LOSS=0.05
MAX_DAILY_TRADES=0
MAX_POSITION_USD=200.0
MAX_TOTAL_EXPOSURE_PCT=0.50
INITIAL_BANKROLL=10000
MAX_TRADES_PER_HOUR=8

# ---- Signal Webhooks (TradingView/custom providers) ----
SIGNAL_WEBHOOK_ENABLED=false
SIGNAL_WEBHOOK_SECRET=
SIGNAL_WEBHOOK_ALLOWED_SOURCES=
SIGNAL_WEBHOOK_MAX_TIMESTAMP_SKEW_SECONDS=300

# ---- Telegram Bot (optional) ----
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=
TELEGRAM_CHAT_IDS=
# Set to false to disable Telegram polling
TELEGRAM_POLLING_ENABLED=true

# ---- Discord Bot (optional) ----
DISCORD_ENABLED=false
DISCORD_TOKEN=
DISCORD_ALLOWED_CHANNEL_IDS=
DISCORD_ALLOWED_GUILD_ID=

# ---- Slack Bot (optional) ----
SLACK_ENABLED=false
SLACK_BOT_TOKEN=
SLACK_SIGNING_SECRET=
SLACK_APP_TOKEN=
SLACK_ALLOWED_CHANNEL_ID=

# ---- Coinbase Exchange (optional) ----
COINBASE_SANDBOX=false
COINBASE_ORG_ID=
COINBASE_KEY_ID=
COINBASE_KEY_NAME=
COINBASE_PRIVATE_KEY_PATH=
COINBASE_MARKET_DATA_URL=

# ---- Stocks (Polygon data + Alpaca execution, optional) ----
STOCKS_ENABLED=false
STOCKS_SYMBOLS=AAPL,MSFT,NVDA,TSLA
STOCKS_SCAN_INTERVAL_SECONDS=900
STOCKS_LOOKBACK_BARS=120
STOCKS_MIN_HOLD_DAYS=1
STOCKS_MAX_HOLD_DAYS=7
STOCKS_MAX_OPEN_POSITIONS=4
STOCKS_MAX_POSITION_USD=500
STOCKS_ESTIMATED_FEE_PCT_PER_SIDE=0.0005
STOCKS_ESTIMATED_SLIPPAGE_PCT_PER_SIDE=0.0002
STOCKS_DB_PATH=data/stocks.db
POLYGON_API_KEY=
POLYGON_BASE_URL=https://api.polygon.io
ALPACA_API_KEY=
ALPACA_API_SECRET=
ALPACA_BASE_URL=https://paper-api.alpaca.markets

# ---- Dashboard ----
DASHBOARD_HOST=0.0.0.0
DASHBOARD_PORT=8080
# Host port binding for Docker (ip:port format). Localhost-only by default.
HOST_PORT=127.0.0.1:8090
# Read-only API key (for dashboard viewers, stress test, etc.)
DASHBOARD_READ_KEY=
# Admin API key (for control actions: pause, resume, close_all, kill)
DASHBOARD_ADMIN_KEY=
# Session secret for cookie-based auth (generate: python -c "import secrets; print(secrets.token_urlsafe(32))")
DASHBOARD_SESSION_SECRET=
# Admin login credentials
DASHBOARD_ADMIN_USERNAME=admin
DASHBOARD_ADMIN_PASSWORD=
# Argon2 hash of admin password (generate: python -c "from argon2 import PasswordHasher; print(PasswordHasher().hash('your_password'))")
DASHBOARD_ADMIN_PASSWORD_HASH=
# Require API key for read endpoints (recommended true for any shared deployment)
DASHBOARD_REQUIRE_API_KEY_FOR_READS=true
# Legacy alias (still supported): DASHBOARD_REQUIRE_AUTH_FOR_READS
# CORS origins (comma-separated, or * for all)
# Production dashboard origin (used by CORS + CSRF origin checks)
DASHBOARD_PUBLIC_ORIGIN=https://nova.horizonsvc.com
# For strict production setup, set exactly:
# DASHBOARD_CORS_ORIGINS=https://nova.horizonsvc.com
DASHBOARD_CORS_ORIGINS=

# ---- Docker Build ----
# "requirements.txt" (full, x86) or "requirements-pi.txt" (ARM/Pi, no TF)
REQUIREMENTS_FILE=requirements.txt
# Host UID/GID for bind-mount write permissions (set to output of `id -u` / `id -g`)
BOT_UID=1000
BOT_GID=1000
# Persistence mounts (bind by default so local + Docker share the same state)
BOT_DATA_MOUNT=./data
BOT_LOGS_MOUNT=./logs
BOT_MODELS_MOUNT=./models

# ---- Stripe Billing (optional) ----
STRIPE_RESTRICTED_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_PRICE_ID=
STRIPE_SECRET_KEY=

# ---- Vault ----
VAULT_PASSWORD=

# ---- Logging ----
LOG_LEVEL=INFO

# ---- ML ----
MODEL_RETRAIN_INTERVAL_HOURS=168
MIN_TRAINING_SAMPLES=10000
DB_PATH=data/trading.db
